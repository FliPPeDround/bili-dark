<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
  </head>
  <body
    class="bg-gray-800 size-xs animated animated-zoom-in-down animated-fast text-gray-4"
  >
    <div class="">
      <header class="flex flex-col justify-center items-center">
        <div class="i-ant-design:bilibili-filled text-[#de4c67] text-6xl"></div>
        <div class="text-2xl c-lightBlue">Bili Dark</div>
      </header>
      <div class="text-4xl">
        <button id="btn-dark" class="btn">Bili Dark</button>
        <button id="btn-light" class="btn bg-light">Bili Light</button>
      </div>
    </div>

    <script type="module">
      import 'virtual:uno.css'
      import '@unocss/reset/tailwind.css'

      const btnLEl = document.getElementById('btn-light')
      btnLEl.addEventListener('click', async (event) => {
        const window = await chrome.windows.getCurrent()
        const x = (event.screenX - window.left) / devicePixelRatio
        const y = event.clientY

        const [tab] = await chrome.tabs.query({
          active: true,
          currentWindow: true,
        })

        const resp = await chrome.tabs.sendMessage(tab.id, {
          biliColorSchema: 'light',
          targetPoint: [x, y],
        })
      })

      const btnDEl = document.getElementById('btn-dark')
      btnDEl.addEventListener('click', async (event) => {
        const window = await chrome.windows.getCurrent()
        const x = (event.screenX - window.left) / devicePixelRatio
        const y = event.clientY

        const [tab] = await chrome.tabs.query({
          active: true,
          currentWindow: true,
        })

        const resp = await chrome.tabs.sendMessage(tab.id, {
          biliColorSchema: 'dark',
          targetPoint: [x, y],
        })
      })
    </script>
  </body>
</html>
